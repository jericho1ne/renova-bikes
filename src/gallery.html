<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Refurbished and Used bikes in East Lansing">
	<meta name="author" content="Renova Bikes">

	<title>Renova Bikes Lansing - Sale List</title>

	 <!-- Bootstrap Core CSS -->
	<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

	<!-- Custom Fonts -->
	<link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Hind|Libre+Franklin|Oswald" rel="stylesheet">

	<!-- Theme CSS -->
	<link href="css/agency.min.css" rel="stylesheet">

	<!-- Renova Bikes Custom CSS -->
	<link href="css/main.css" rel="stylesheet">
	<link href="css/custom-inputs.css" rel="stylesheet">
	<!-- <link href="css/datatables.css" rel="stylesheet"> -->
	
	<!-- Datatable required script files -->
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<!-- <script type="text/javascript" src="js/jquery.dataTables.min.js"></script> -->

	<script type="text/javascript" src="js/common.js"></script>
	<script type="text/javascript" src="js/methods.js"></script>
</head>

<body>
	<!-- Navigation -->
	<nav id="mainNav" class="navbar navbar-default navbar-custom navbar-fixed-top">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header page-scroll">
				<a class="navbar-brand" href="index.html">Go Back</a>
			</div>
		</div>
	</nav>
	<!-- Header -->
	<div class="container herotext pad-top-50">
		<div class="row intro-text">
			<div class="col-lg-12 text-center intro-heading">Find your bike</div>
			<!-- <div class="col-lg-12 text-center intro-lead-in">Complete Builds</div> -->
		</div>
	</div>
	
	<!-- Bike Fit Settings -->
	<div class="container">
		<div class="row col-lg-12">
			<div class="hidden col-md-6 text-center">
				Height 	
				<select id="height-dropdown" class="select-dropdown"></select>
			</div>
			<div class="col-md-6 text-center">
				<h3>Inseam (crotch to floor)</h3>
				<select id="inseam-dropdown" class="select-dropdown">
					<option selected value="0">–––</option>
				</select>
			</div>
		</div>
	</div>

	<!-- Bike Use Checkboxes -->
	<div class="container">
		<div class="row col-lg-12">
			<div class="col-md-6 text-center checkbox checkbox-inline">

				<h3>Use</h3>

				<div class="checkbox checkbox-info checkbox-circle">
					<input id="checkbox1" class="styled" type="checkbox">
					<label for="checkbox1">Inline One</label>
				</div>
				
				<div class="checkbox checkbox-info checkbox-circle">
					<input id="checkbox2" class="styled" type="checkbox">
					<label for="checkbox2">Inline Two</label>
				</div>

			</div>
		</div>
	</di

	<!-- Search button -->
	<div class="container">
		<div class="row col-lg-12 text-center">
			<span id="searchBikesBtn" class="page-scroll btn btn-xl margin-top-30">Search</span>
		</div>
	</div>

	<!-- Bike Listings -->
	<div class="row">
		<div class="col-lg-12 text-center">
			<div class="container margin-top-20">
				<!-- data loads into div below -->
				<div id="bikes"></div>
			</div>
		</div>
	</div>
	
	<!-- Placeholder for bike thumbnail HTML template -->
	<div id="template-temp" class="hidden"></div>
	<!-- Placeholder for bootstrap bike details modal (no need for `hidden` class) -->
	<div id="modal-temp" class=""></div>

	<!-- Bootstrap Core JavaScript -->
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
	
	<!-- Bootstrap Theme JavaScript -->
	<script src="js/agency.min.js"></script>
</body>

<script>
$(document).ready(function() {
	// 1 in = 2.54cm
	var heightMin = 48;  // 4 ft
	var heightMax = 84;   // 7 ft
	var feet;
	var inches;
	var optionHtml;

	for (var i = heightMin; i <= heightMax; i++) {
		feet = Math.floor(i / 12);
		inches = (i % 12) != 0
			? i % 12 + ' in'
			: '';

		optionHtml = 
			'<option value="' + i + '">' +
				feet + 'ft ' + inches +
			'</option>';

		$('#height-dropdown').append(optionHtml);	        	
	}

	// Inseam min / max
	var inseamMin = 20;
	var inseamMax = 38;
	var selected = '';

	for (var i = inseamMin; i <= inseamMax; i++) {
		selected = '';
		// Default to the most common inseam
		// if (i == 32) {
		// 	selected = ' selected';
		// }

		optionHtml = 
			'<option value="' + i + '">' +
				i +
			'</option>';

		$('#inseam-dropdown').append(optionHtml);	        	
	}

	
	window.bikes = [];

	// Load bootstrap modal into DOM
	$('#modal-temp')
		.load('templates/detail-modal.html', function() {
			// Callback that immediately fires after the load is completed
		});
	/**
	 * Generic call that sets interaction listeners
	 */
	function setListeners() {
		$('#searchBikesBtn').on('click', function() {
			var inseam = parseInt($('#inseam-dropdown').val());

			if (inseam == 0) { 
				return;
			}
			// Convert inseam fron in to cm to get saddle height
			var saddleHeight = inseam * .96 * 2.54;
			var bikeResults = [];

			for (var i = 0; i < window.bikes.length; i++) {
				// If road, subtract 18cm (+/-2cm) to get frame size
				if (bikes[i].Use.toLowerCase() == "road") {
					if (bikes[i].SizeInCm < (saddleHeight - 16) &&
						bikes[i].SizeInCm > (saddleHeight - 20)
					) {
						bikeResults.push(bikes[i]);
					}
				}
				// If mtn, subtract 24cm (+/-2cm) to get frame size
				else if (bikes[i].Use.toLowerCase() == "mtn") {
					if (bikes[i].SizeInCm < (saddleHeight - 22) &&
						bikes[i].SizeInCm > (saddleHeight - 26)
					) {
						bikeResults.push(bikes[i]);
					}
				}
				// Else, go with -20cm (?)
				else {
					if (bikes[i].SizeInCm < (saddleHeight - 20) &&
						bikes[i].SizeInCm > (saddleHeight - 28)
					) {
						bikeResults.push(bikes[i]);
					}
				}
			} // End for loop searching for matching frame sizes

			$('#bikes').empty();
			// Make bike data global object, import template and clone it
			window.bikeResults = bikeResults;
			loadBikesIntoTemplate(window.bikeResults, '#bikes');
		});
	}

	var postData = {
		// Pass in any required parameters
	};
	makeAjaxRequest(postData, 'POST', 'php/getBikeData.php')
		.then(function(response) {
			// If response was received
			if (response.result) {
				// Clear target div
				$('#bikes').empty();
				// Make bike data global object, import template and clone it
				window.bikes = response.payload;
				loadBikesIntoTemplate(window.bikes, '#bikes');
			}	
			// Else, surface the error message
			else {
				$('#bikes').html(response.message);
			}
		})
		.then(function(data) {
			// Generate dropdowns

			// Set click listeners and such
			setListeners();
		});

}); // End document.ready
</script>

</html>


