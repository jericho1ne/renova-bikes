<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Refurbished and Used bikes in East Lansing">
	<meta name="author" content="Renova Bikes">

	<title>Renova Bikes Lansing - Sale List</title>

	 <!-- Bootstrap Core CSS -->
	<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

	<!-- Custom Fonts -->
	<link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Hind|Libre+Franklin|Oswald" rel="stylesheet">

	<!-- Theme CSS -->
	<link href="css/agency.min.css" rel="stylesheet">

	<!-- Renova Bikes Custom CSS -->
	<link href="css/main.css" rel="stylesheet">
	<link href="css/datatables.css" rel="stylesheet">
	
	<!-- Datatable required script files -->
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<!-- <script type="text/javascript" src="js/jquery.dataTables.min.js"></script> -->

	<script type="text/javascript" src="js/common.js"></script>
	<script type="text/javascript" src="js/methods.js"></script>
</head>

<body>
	<!-- Navigation -->
	<nav id="mainNav" class="navbar navbar-default navbar-custom navbar-fixed-top">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header page-scroll">
				<a class="navbar-brand" href="index.html">Go Back</a>
			</div>
		</div>
	</nav>
	<!-- Header -->
	<div class="container herotext pad-top-50">
		<div class="row intro-text">
			<div class="col-lg-12 text-center intro-heading">Featured Bikes</div>
			<!-- <div class="col-lg-12 text-center intro-lead-in">Complete Builds</div> -->
		</div>
	</div>
	
	<!-- Bike Fit -->
	<div class="container">
		<div class="row col-lg-12">
			<div class="col-md-6 text-center">
			
				Height 	
	
				<select id="height-dropdown" class="select-dropdown">
					
				</select>

			</div>
			<div class="col-md-6 text-center">
				Inseam (crotch to floor) 
				
				<select id="inseam-dropdown" class="select-dropdown">
				
				</select>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="row col-lg-12 text-center">
			<span id="searchBikesBtn" class="page-scroll btn btn-xl margin-top-30">Search</span>
		</div>
	</div>

	<!-- Bike Listings -->
	<div class="row">

		<div class="col-lg-12 text-center">
			<div class="container margin-top-20">
				<!-- data loads into div below -->
				<div id="bikes"></div>
			</div>
		</div>
	</div>
	
	<!-- Placeholders for HTML templates -->
	<div id="template-temp" class="hidden"></div>
	<div id="modal-temp" class="hidden"></div>

	<!-- Bootstrap Core JavaScript -->
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
	
	<!-- Bootstrap Theme JavaScript -->
	<script src="js/agency.min.js"></script>
</body>

<script>
$(document).ready(function() {
	window.bikes = [];

	// Load bootstrap modal into DOM
	$('#modal-temp')
		.load('templates/detail-modal.html', function() {
			console.log("DONE LOADING MODAL.");
			// Callback that immediately fires after the load is completed
		});
	/**
	 * Generic call that sets interaction listeners
	 */
	function setListeners() {
		$('#searchBikesBtn').click(function() {
			$('#bike-detail-modal').modal('toggle');
		});

		// Modal X close button
		$('.close-modal').click(function() {
			$('#bike-detail-modal').modal('toggle');
		});
	}

	var postData = {};
	makeAjaxRequest(postData, 'POST', 'php/getBikeData.php')
		.then(function(response) {
			// If response was received
			if (response.result) {
				// Clear target div
				$('#bikes').empty();
				// Make bike data global object, import template and clone it
				window.bikes = response.payload;
				loadBikesIntoTemplate(window.bikes, '#bikes');
			}	
			// Else, surface the error message
			else {
				$('#bikes').html(response.message);
			}
		})
		.then(function(data) {
			// Generate dropdowns
			// 
			// Set click listeners and such
			setListeners();
		});

}); // End document.ready
</script>

</html>


